(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(14),a=n.n(r),o=n(3),s=n(0),u=function(e){var t=e.setSearchWith;return Object(s.jsxs)(s.Fragment,{children:["filter shown with ",Object(s.jsx)("input",{onChange:function(e){return t(e.target.value)}})]})},i=function(e){var t=e.setNewName,n=e.setNewNumber;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{onChange:function(e){return t(e.target.value)}})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{onChange:function(e){return n(e.target.value)}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},l=n(4),j=n.n(l),d="/api/persons",b={getAll:function(){return j.a.get(d)},create:function(e){return j.a.post(d,e)},deleteOne:function(e){return j.a.delete("".concat(d,"/").concat(e))},update:function(e,t){return j.a.put("".concat(d,"/").concat(e.id),t)}},f=function(e){var t=e.personsToShow,n=e.setToggle,c=e.toggle,r=e.setStatusMessage;return Object(s.jsx)(s.Fragment,{children:t.map((function(e){return Object(s.jsxs)("p",{children:[e.name," ",e.number," ",Object(s.jsx)("button",{onClick:function(){return t=e.id,a=e.name,void(window.confirm("Delete ".concat(a,"?"))&&(b.deleteOne(t),setTimeout((function(){n(!c)}),100),r("Deleted ".concat(a)),setTimeout((function(){r(null)}),5e3)));var t,a},children:"delete"})]},e.id)}))})},m=function(e){var t=e.message;return null===t?null:Object(s.jsx)("div",{className:"message",children:t})},h=function(e){var t=e.errorMessage;return null===t?null:Object(s.jsx)("div",{className:"error",children:t})},O=(n(38),function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),l=Object(o.a)(a,2),j=l[0],d=l[1],O=Object(c.useState)(""),g=Object(o.a)(O,2),p=g[0],x=g[1],v=Object(c.useState)(""),w=Object(o.a)(v,2),S=w[0],N=w[1],T=Object(c.useState)(!0),C=Object(o.a)(T,2),k=C[0],y=C[1],A=Object(c.useState)(!0),F=Object(o.a)(A,2),M=F[0],D=F[1],E=Object(c.useState)(null),I=Object(o.a)(E,2),J=I[0],P=I[1],U=Object(c.useState)(null),W=Object(o.a)(U,2),B=W[0],q=W[1];Object(c.useEffect)((function(){b.getAll().then((function(e){r(e.data)})),y(""===S)}),[S,M]);var z=k?n:n.filter((function(e){return e.name.toUpperCase().includes(S.toUpperCase())}));return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(m,{message:J}),Object(s.jsx)(h,{errorMessage:B}),Object(s.jsx)(u,{setSearchWith:N}),Object(s.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var t=n.filter((function(e){return e.name===j})),c={name:j,number:p};t.length>0?window.confirm("".concat(c.name," is already added to phonebook, replace the old number with a new one?"))&&b.getAll().then((function(e){var t=e.data.filter((function(e){return e.name===c.name}));console.log(t),b.update(t[0],c),setTimeout((function(){D(!M)}),100),P("Edited contact ".concat(c.name)),setTimeout((function(){P(null)}),5e3)})).catch((function(e){q("Information of ".concat(c.name," has already been removed from server")),setTimeout((function(){q(null)}),5e3)})):b.create(c).then((function(e){r(n.concat(e.data)),d(""),P("Added ".concat(c.name)),setTimeout((function(){P(null)}),5e3)})).catch((function(e){q(e.response.data.error),setTimeout((function(){q(null)}),5e3)}))}(e)},children:[Object(s.jsx)("h2",{children:"add a new"}),Object(s.jsx)(i,{setNewName:d,setNewNumber:x})]}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(f,{personsToShow:z,persons:n,setPersons:r,setToggle:D,toggle:M,setStatusMessage:P})]})});a.a.render(Object(s.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.2cdfbb87.chunk.js.map